{"ast":null,"code":"import { API } from \"../../backend\";\nimport { cartEmpty } from \"../../core/helper/cartHelper\";\nexport const signup = user => {\n  return fetch(`${API}user/`, {\n    method: \"POST\",\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(user)\n  }).then(response => {\n    return response.json();\n  }).catch(err => console.log(err));\n};\nexport const signin = user => {\n  const formData = new FormData();\n\n  for (const name in user) {\n    formData.append((name, user[name]));\n  }\n\n  for (var key of formData.keys()) {\n    console.log(\"MYKEY: \", key);\n  }\n\n  return fetch(`${API}user/login/`, {\n    method: \"POST\",\n    body: formData\n  }).then(response => {\n    console.log(\"SUCCESS\", response);\n    return response.json();\n  }).catch(err => console.log(err));\n};\nexport const authenticate = (data, next) => {\n  if (typeof window !== undefined) {\n    localStorage.setItem(\"jwt\", JSON.stringify(data));\n    next();\n  }\n};\nexport const isAuthenticated = () => {\n  if (typeof window !== undefined) {\n    return false;\n  }\n\n  if (localStorage.getItem(\"jwt\")) {\n    return JSON.parse(localStorage.getItem(\"jwt\"));\n  } else {\n    return false;\n  }\n};\nexport const signout = next => {\n  const userId = isAuthenticated() && isAuthenticated().user.userId;\n\n  if (typeof window !== undefined) {\n    localStorage.removeItem(\"jwt\");\n    cartEmpty(() => {});\n    next();\n    return fetch(`${API}user/logout/${userId}`, {\n      method: \"GET\"\n    }).then(response => {\n      console.log(\"Signout success\");\n      next();\n    }).catch(err => console.log(err));\n  }\n};","map":{"version":3,"sources":["I:/Online_Store/projectfrontend/src/auth/helper/index.js"],"names":["API","cartEmpty","signup","user","fetch","method","headers","Accept","body","JSON","stringify","then","response","json","catch","err","console","log","signin","formData","FormData","name","append","key","keys","authenticate","data","next","window","undefined","localStorage","setItem","isAuthenticated","getItem","parse","signout","userId","removeItem"],"mappings":"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","sourcesContent":["import { API } from \"../../backend\"\r\nimport { cartEmpty } from \"../../core/helper/cartHelper\"\r\n\r\nexport const signup = (user) => {\r\n    return fetch(`${API}user/`, {\r\n        method: \"POST\",\r\n        headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\"\r\n        },\r\n        body: JSON.stringify(user)\r\n    })\r\n        .then((response) => {\r\n            return response.json()\r\n        })\r\n        .catch((err) => console.log(err))\r\n}\r\n\r\nexport const signin = user => {\r\n    const formData = new FormData()\r\n    for (const name in user) {\r\n        formData.append((name, user[name]))\r\n    }\r\n\r\n    for (var key of formData.keys()) {\r\n        console.log(\"MYKEY: \", key);\r\n    }\r\n    return fetch(`${API}user/login/`, {\r\n        method: \"POST\",\r\n        body: formData\r\n    })\r\n        .then(response => {\r\n            console.log(\"SUCCESS\", response);\r\n            return response.json()\r\n        })\r\n        .catch(err => console.log(err))\r\n}\r\n\r\nexport const authenticate = (data, next) => {\r\n    if (typeof window !== undefined) {\r\n        localStorage.setItem(\"jwt\", JSON.stringify(data))\r\n        next()\r\n    }\r\n}\r\n\r\nexport const isAuthenticated = () => {\r\n    if (typeof window !== undefined) {\r\n        return false\r\n    }\r\n    if (localStorage.getItem(\"jwt\")) {\r\n        return JSON.parse(localStorage.getItem(\"jwt\"))\r\n    } else {\r\n        return false\r\n    }\r\n}\r\n\r\n\r\nexport const signout = (next) => {\r\n    const userId = isAuthenticated() && isAuthenticated().user.userId\r\n\r\n    if (typeof window !== undefined) {\r\n        localStorage.removeItem(\"jwt\")\r\n        cartEmpty(() => { })\r\n        next()\r\n\r\n        return fetch(`${API}user/logout/${userId}`, {\r\n            method: \"GET\"\r\n        })\r\n            .then(response => {\r\n                console.log(\"Signout success\")\r\n                next()\r\n            })\r\n            .catch(err => console.log(err))\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}